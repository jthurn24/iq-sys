@model IQI.Intuition.Web.Models.Reporting.Patient.PatientListView           
@{
    ViewBag.Layout_ContentTitle = "Patient List";
    ViewBag.QuickListAction = "FacilityReportQuickList";
    ViewBag.QuickListItem = "Patient List";
    ViewBag.IsExportable = true;
    ViewBag.LimitedExport = true;
    ViewBag.ExportLandscape = true;
}

<section class="grid_16 box leading"> 
        <h3>Patient List</h3>
        <div class="inside">
        @using (Html.BeginForm(null, null, FormMethod.Get))
        {
            <div style="padding:10px;">
                <div style="font-size:12px;">Sort By:</div> @Html.DropDownListFor(m => m.SortMode, Model.SortModeOptions)
                <div style="font-size:12px;padding-top:10px;padding-bottom:10px;">Show Details @Html.CheckBoxFor(m => m.ShowDetails)</div>
                <div style="padding-top:5px;">@Html.SmartSubmit("Refresh")</div>
            </div>
        }
        </div> 
</section>

<section class="grid_16 box leading"> 
        <h3>Patient List</h3>
        <div class="inside">
        <br />
        <table class="iqitable" style="margin-bottom:0px;">
            <tr>
                <th style="width:50px;">First Name</th>
                <th style="width:100px;">Last Name</th>
                <th style="width:80px;">Middle</th>
                <th style="width:80px;">Admission Date</th>
                <th style="width:100px;">Floor</th>
                <th style="width:100px;">Wing</th>
                <th style="width:100px;">Room</th>
                <th style="width:200px;">&nbsp;</th>
            </tr>
            @foreach (var patient in Model.Patients)
            {
                    <tr>
                        <td style="width:50px;vertical-align:top;">@patient.FirstName</td>
                        <td style="width:100px;vertical-align:top;">@patient.LastName</td>
                        <td style="width:80px;vertical-align:top;">@patient.Middle</td>
                        <td style="width:80px;vertical-align:top;">@patient.AdmissionDate</td>
                        <td style="width:100px;vertical-align:top;">@patient.Floor</td>
                        <td style="width:100px;vertical-align:top;">@patient.Wing</td>
                        <td style="width:100px;vertical-align:top;">@patient.Room</td>
                        <td style="width:200px;vertical-align:top;">
                            @if (Model.ShowDetails)
                            {
                                <div>
                                    @foreach (var flag in patient.Flags)
                                    {
                                        <div>* @flag</div>
                                    }
                                    @foreach (var warning in patient.Warnings)
                                    {
                                        <div>* @warning</div>
                                    }
                                    @foreach (var prec in patient.Precautions)
                                    {
                                        <div>* Precaution: @prec</div>
                                    }
                                </div>
                            }
                        </td>
                    </tr>
            }
             </table>
        </div> 
        <br />
</section>

<div style="clear:both;">&nbsp;</div>

